import 'package:untitled/widget_of_week/screens/week1_safearea.dart';

import 'package:untitled/widget_of_week/screens/week10_table.dart';
import 'package:untitled/widget_of_week/screens/week11_sliverAppBar.dart';
import 'package:untitled/widget_of_week/screens/week12_sliverListGrid.dart';
import 'package:untitled/widget_of_week/screens/week13_fadeInImage.dart';
import 'package:untitled/widget_of_week/screens/week14_StreamBuilder.dart';
import 'package:untitled/widget_of_week/screens/week15_InheritedModel.dart';
import 'package:untitled/widget_of_week/screens/week16_clipRRect.dart';
import 'package:untitled/widget_of_week/screens/week17_Hero.dart';
import 'package:untitled/widget_of_week/screens/week18_CustomPaint.dart';
import 'package:untitled/widget_of_week/screens/week19_ToolTip.dart';
import 'package:untitled/widget_of_week/screens/week1_safearea.dart';
import 'package:untitled/widget_of_week/screens/week20_FittedBox.dart';
import 'package:untitled/widget_of_week/screens/week21_LayOutBuilder.dart';
import 'package:untitled/widget_of_week/screens/week22_AbsorbPointer.dart';
import 'package:untitled/widget_of_week/screens/week23_Transform.dart';
import 'package:untitled/widget_of_week/screens/week24_BackDropFilter.dart';
import 'package:untitled/widget_of_week/screens/week25_Align.dart';
import 'package:untitled/widget_of_week/screens/week26_Positioned.dart';
import 'package:untitled/widget_of_week/screens/week27_AnimatedBuilder.dart';
import 'package:untitled/widget_of_week/screens/week28_Dismissible.dart';
import 'package:untitled/widget_of_week/screens/week29_SizedBox.dart';
import 'package:untitled/widget_of_week/screens/week2_expaned.dart';
import 'package:untitled/widget_of_week/screens/week30_ValueListenableBuilder.dart';
import 'package:untitled/widget_of_week/screens/week31_Draggable.dart';
import 'package:untitled/widget_of_week/screens/week32_AnimatedList.dart';
import 'package:untitled/widget_of_week/screens/week33_Flexible.dart';
import 'package:untitled/widget_of_week/screens/week34_MediaQuery.dart';
import 'package:untitled/widget_of_week/screens/week35_Spacer.dart';
import 'package:untitled/widget_of_week/screens/week36_InheritedWidget.dart';
import 'package:untitled/widget_of_week/screens/week37_AnimatedIcon.dart';
import 'package:untitled/widget_of_week/screens/week38_AspectRatio.dart';
import 'package:untitled/widget_of_week/screens/week39_LimistedBox.dart';
import 'package:untitled/widget_of_week/screens/week3_wrap.dart';
import 'package:untitled/widget_of_week/screens/week40_PlaceHolder.dart';
import 'package:untitled/widget_of_week/screens/week41_RichText.dart';
import 'package:untitled/widget_of_week/screens/week42_ReorderableListView.dart';
import 'package:untitled/widget_of_week/screens/week43_AnimatedSwitcher.dart';
import 'package:untitled/widget_of_week/screens/week44_AnimatedPositioned.dart';
import 'package:untitled/widget_of_week/screens/week45_AnimatedPadding.dart';
import 'package:untitled/widget_of_week/screens/week46_IndexedStack.dart';
import 'package:untitled/widget_of_week/screens/week47_Semantics.dart';
import 'package:untitled/widget_of_week/screens/week48_ConstrainedBox.dart';
import 'package:untitled/widget_of_week/screens/week49_Stack.dart';
import 'package:untitled/widget_of_week/screens/week4_animatedContainer.dart';
import 'package:untitled/widget_of_week/screens/week50_AnimatedOpacity.dart';
import 'package:untitled/widget_of_week/screens/week51_fractionallySizedBox.dart';
import 'package:untitled/widget_of_week/screens/week52_ListView.dart';
import 'package:untitled/widget_of_week/screens/week53_ListTile.dart';
import 'package:untitled/widget_of_week/screens/week54_Container.dart';
import 'package:untitled/widget_of_week/screens/week55_SelectableText.dart';
import 'package:untitled/widget_of_week/screens/week56_DataTable.dart';
import 'package:untitled/widget_of_week/screens/week57_Slider.dart';
import 'package:untitled/widget_of_week/screens/week58_AlertDialog.dart';
import 'package:untitled/widget_of_week/screens/week59_AnimatedCrossFade.dart';
import 'package:untitled/widget_of_week/screens/week5_opacity.dart';
import 'package:untitled/widget_of_week/screens/week60_DraggableScrollableSheet.dart';
import 'package:untitled/widget_of_week/screens/week61_ColorFiltered.dart';
import 'package:untitled/widget_of_week/screens/week62_ToggleButtons.dart';
import 'package:untitled/widget_of_week/screens/week63_CupertinoActionSheet.dart';
import 'package:untitled/widget_of_week/screens/week64_TweenAnimationBuilder.dart';
import 'package:untitled/widget_of_week/screens/week65_Image.dart';
import 'package:untitled/widget_of_week/screens/week66_DefaultTabControl.dart';
import 'package:untitled/widget_of_week/screens/week67_Drawer.dart';
import 'package:untitled/widget_of_week/screens/week68_SnackBar.dart';
import 'package:untitled/widget_of_week/screens/week69_ListWheelScrollView.dart';
import 'package:untitled/widget_of_week/screens/week6_futureBuilder.dart';
import 'package:untitled/widget_of_week/screens/week71_NotificationListener.dart';
import 'package:untitled/widget_of_week/screens/week72_Builder.dart';
import 'package:untitled/widget_of_week/screens/week73_ClipPath.dart';
import 'package:untitled/widget_of_week/screens/week74_ProgressIndicator.dart';
import 'package:untitled/widget_of_week/screens/week75_Divider.dart';
import 'package:untitled/widget_of_week/screens/week76_IgnorePointer.dart';
import 'package:untitled/widget_of_week/screens/week77_CupertinoActivityIndicator.dart';
import 'package:untitled/widget_of_week/screens/week78_ClipOval.dart';
import 'package:untitled/widget_of_week/screens/week79_AnimatedWidget.dart';
import 'package:untitled/widget_of_week/screens/week7_fadeTransition.dart';
import 'package:untitled/widget_of_week/screens/week80_Padding.dart';
import 'package:untitled/widget_of_week/screens/week81_CheckboxListTile.dart';
import 'package:untitled/widget_of_week/screens/week82_AboutDialog.dart';
import 'package:untitled/widget_of_week/screens/week83_InterActiveViewer.dart';
import 'package:untitled/widget_of_week/screens/week8_floatingActionButton.dart';
import 'package:untitled/widget_of_week/screens/week9_pageView.dart';
import 'package:untitled/widget_of_week/screens/week70_ShaderMask.dart';
import 'package:flutter/material.dart';

import 'constants.dart';

void main() async {
  //have to do this because async main()
  WidgetsFlutterBinding.ensureInitialized();

  // await SpUtil.getInstance();

  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'FWoW',
      theme: ThemeData(
        primarySwatch: Colors.blue,
        visualDensity: VisualDensity.adaptivePlatformDensity,
      ),
      home: MyHomePage(title: 'Flutter Widget of the Week Demo', key: Key('Text1'),),
      routes: getRoutes(),
    );
  }

  Map<String, WidgetBuilder> getRoutes() {
    return {
      //'/': (context) => MyHomePage(),
      Const.WEEK1_SafeArea: (context) => Week1SafeArea(key: Key('Text1'),),
      Const.WEEK2_Expanded: (context) => Week2Expanded(key: Key('Text1')),
      Const.WEEK3_Wrap: (context) => Week3Wrap(key: Key('Text1')),
      Const.WEEK4_AnimatedContainer: (context) => Week4AnimatedContainer(),
      Const.WEEK5_Opacity: (context) => Week5Opacity(),
      Const.WEEK6_FutureBuilder: (context) => Week6FutureBuilder(),
      Const.WEEK7_FadeTransition: (context) => Week7FadeTransition(key: Key('Text1')),
      Const.WEEK8_FloatingActionButton: (context) =>
          Week8FloatingActionButton(),
      Const.WEEK9_PageView: (context) => Week9PageView(key: Key('Text1'), title: "",),
      Const.WEEK10_Table: (context) => Week10Table(key: Key('Text1'),title: Const.WEEK10_Table),
      Const.WEEK11_SliverAppBar: (context) =>
          Week11SliverAppBar(title: Const.WEEK11_SliverAppBar, key: Key('Text1'),),
      Const.WEEK12_SliverListGrid: (context) => Week12SliverListGrid(
        title: Const.WEEK12_SliverListGrid, key: Key('Text1'),
      ),
      Const.WEEK13_FadeInImage: (context) => Week13FadeInImage(
        title: Const.WEEK13_FadeInImage, key: Key('Text1'),
      ),
      Const.WEEK14_StreamBuilder: (context) => Week14StreamBuilder(
        title: Const.WEEK14_StreamBuilder, key: Key('Text1'),
      ),
      Const.WEEK15_InheritedModel: (context) =>
          Week15InheritedModel(title: Const.WEEK15_InheritedModel, key: Key('Text1'),),
      Const.WEEK16_ClipRRect: (context) =>
          Week16ClipRRect(title: Const.WEEK16_ClipRRect, key: Key('Text1'),),
      Const.WEEK17_Hero: (context) => Week17Hero(),
      Const.WEEK18_CustomPaint: (context) =>
          Week18CustomPaint(title: Const.WEEK18_CustomPaint, key: Key('Text1'),),
      Const.WEEK19_ToolTip: (context) =>
          Week19ToolTip(title: Const.WEEK19_ToolTip,key: Key('Text1')),
      Const.WEEK20_FittedBox: (context) =>
          Week20FittedBox(title: Const.WEEK20_FittedBox,key: Key('Text1')),
      Const.WEEK21_LayOutBuilder: (context) =>
          Week21LayOutBuilder(title: Const.WEEK21_LayOutBuilder,key: Key('Text1')),
      Const.WEEK22_AbsorbPointer: (context) =>
          Week22AbsorbPointer(title: Const.WEEK22_AbsorbPointer,key: Key('Text1')),
      Const.WEEK23_Transform: (context) =>
          Week23Transform(title: Const.WEEK23_Transform,key: Key('Text1')),
      Const.WEEK24_BackdropFilter: (context) =>
          Week24BackdropFilter(title: Const.WEEK24_BackdropFilter,key: Key('Text1')),
      Const.WEEK25_Align: (context) => Week25Align(title: Const.WEEK25_Align,key: Key('Text1')),
      Const.WEEK26_Positioned: (context) =>
          Week26Positioned(title: Const.WEEK26_Positioned,key: Key('Text1')),
      Const.WEEK27_AnimatedBuilder: (context) => Week27AnimatedBuilder(key: Key('Text1')),
      Const.WEEK28_Dismissible: (context) =>
          Week28Dismissible(title: Const.WEEK28_Dismissible,key: Key('Text1')),
      Const.WEEK29_SizedBox: (context) =>
          Week29SizedBox(title: Const.WEEK29_SizedBox,key: Key('Text1')),
      Const.WEEK30_ValueListenableBuilder: (context) =>
          Week30ValueListenableBuilder(
              title: Const.WEEK30_ValueListenableBuilder,key: Key('Text1')),
      Const.WEEK31_Draggable: (context) =>
          Week31Draggable(title: Const.WEEK31_Draggable,key: Key('Text1')),
      Const.WEEK32_AnimatedList: (context) => Week32AnimatedList(),
      Const.WEEK33_Flexible: (context) =>
          Week33Flexible(title: Const.WEEK33_Flexible,key: Key('Text1')),
      Const.WEEK34_MediaQuery: (context) =>
          Week34MediaQuery(title: Const.WEEK34_MediaQuery,key: Key('Text1')),
      Const.WEEK35_Spacer: (context) =>
          Week35Spacer(title: Const.WEEK35_Spacer,key: Key('Text1')),
      Const.WEEK36_InheritedWidget: (context) =>
          Week36InheritedWidget(title: Const.WEEK36_InheritedWidget,key: Key('Text1')),
      Const.WEEK37_AnimatedIcon: (context) =>
          Week37AnimatedIcon(title: Const.WEEK37_AnimatedIcon,key: Key('Text1')),
      Const.WEEK38_AspectRatio: (context) =>
          Week38AspectRatio(title: Const.WEEK38_AspectRatio,key: Key('Text1')),
      Const.WEEK39_LimitedBox: (context) =>
          Week39LimitedBox(title: Const.WEEK39_LimitedBox,key: Key('Text1')),
      Const.WEEK40_PlaceHolder: (context) =>
          Week40PlaceHolder(title: Const.WEEK40_PlaceHolder,key: Key('Text1')),
      Const.WEEK41_RichText: (context) =>
          Week41RichText(title: Const.WEEK41_RichText,key: Key('Text1')),
      Const.WEEK42_ReorderableListView: (context) =>
          Week42ReorderableListView(title: Const.WEEK42_ReorderableListView,key: Key('Text1')),
      Const.WEEK43_AnimatedSwitcher: (context) =>
          Week43AnimatedSwitcher(title: Const.WEEK43_AnimatedSwitcher,key: Key('Text1')),
      Const.WEEK44_AnimatedPositioned: (context) =>
          Week44AnimatedPositioned(title: Const.WEEK44_AnimatedPositioned,key: Key('Text1')),
      Const.WEEK45_AnimatedPadding: (context) =>
          Week45AnimatedPadding(title: Const.WEEK45_AnimatedPadding,key: Key('Text1')),
      Const.WEEK46_IndexedStack: (context) =>
          Week46IndexedStack(title: Const.WEEK46_IndexedStack,key: Key('Text1')),
      Const.WEEK47_Semantics: (context) =>
          Week47Semantics(title: Const.WEEK47_Semantics,key: Key('Text1')),
      Const.WEEK48_ConstrainedBox: (context) =>
          Week48ConstrainedBox(title: Const.WEEK48_ConstrainedBox,key: Key('Text1')),
      Const.WEEK49_Stack: (context) => Week49Stack(title: Const.WEEK49_Stack,key: Key('Text1')),
      Const.WEEK50_AnimatedOpacity: (context) =>
          Week50AnimatedOpacity(title: Const.WEEK50_AnimatedOpacity,key: Key('Text1')),
      Const.WEEK51_FractionallySizedBox: (context) =>
          Week51FractionallySizedBox(title: Const.WEEK51_FractionallySizedBox,key: Key('Text1')),
      Const.WEEK52_ListView: (context) =>
          Week52ListView(title: Const.WEEK52_ListView,key: Key('Text1')),
      Const.WEEK53_ListTile: (context) =>
          Week53ListTile(title: Const.WEEK53_ListTile,key: Key('Text1')),
      Const.WEEK54_Container: (context) =>
          Week54Container(title: Const.WEEK54_Container,key: Key('Text1')),
      Const.WEEK55_SelectableText: (context) =>
          Week55SelectableText(title: Const.WEEK55_SelectableText,key: Key('Text1')),
      Const.WEEK56_DataTable: (context) =>
          Week56DataTable(title: Const.WEEK56_DataTable,key: Key('Text1')),
      Const.WEEK57_Slider: (context) =>
          Week57Slider(title: Const.WEEK57_Slider,key: Key('Text1')),
      Const.WEEK58_AlertDialog: (context) =>
          Week58AlertDialog(title: Const.WEEK58_AlertDialog,key: Key('Text1')),
      Const.WEEK59_AnimatedCrossFade: (context) =>
          Week59AnimatedCrossFade(title: Const.WEEK59_AnimatedCrossFade,key: Key('Text1')),
      Const.WEEK60_DraggableScrollableSheet: (context) =>
          Week60DraggableScrollableSheet(
              title: Const.WEEK60_DraggableScrollableSheet,key: Key('Text1')),
      Const.WEEK61_ColorFilter: (context) =>
          Week61ColorFilter(title: Const.WEEK61_ColorFilter,key: Key('Text1')),
      Const.WEEK62_ToggleButtons: (context) =>
          Wweek62ToggleButtons(title: Const.WEEK62_ToggleButtons,key: Key('Text1')),
      Const.WEEK63_CupertinoActionSheet: (context) =>
          Week63CupertinoActionSheet(title: Const.WEEK63_CupertinoActionSheet,key: Key('Text1')),
      Const.WEEK64_TweenAnimationBuilder: (context) =>
          Week64TweenAnimationBuilder(
              title: Const.WEEK64_TweenAnimationBuilder,key: Key('Text1')),
      Const.WEEK65_Image: (context) => Week65Image(title: Const.WEEK65_Image,key: Key('Text1')),
      Const.WEEK66_DefaultTabController: (context) =>
          Week66DefaultTabController(title: Const.WEEK66_DefaultTabController,key: Key('Text1')),
      Const.WEEK67_Drawer: (context) =>
          Week67Drawer(title: Const.WEEK67_Drawer,key: Key('Text1')),
      Const.WEEK68_SnackBar: (context) =>
          Week68SnackBar(title: Const.WEEK68_SnackBar,key: Key('Text1')),
      Const.WEEK69_ListWheelScrollView: (context) =>
          Week69ListWheelScrollView(title: Const.WEEK69_ListWheelScrollView,key: Key('Text1')),
      Const.WEEK70_ShaderMask: (context) =>
          Week70ShaderMask(title: Const.WEEK70_ShaderMask,key: Key('Text1')),
      Const.WEEK71_NotificationListener: (context) =>
          Week71NotificationListener(title: Const.WEEK71_NotificationListener,key: Key('Text1')),
      Const.WEEK72_Builder: (context) =>
          Week72Builder(title: Const.WEEK72_Builder,key: Key('Text1')),
      Const.WEEK73_ClipPath: (context) =>
          Week73ClipPath(title: Const.WEEK73_ClipPath,key: Key('Text1')),
      Const.WEEK74_ProgressIndicator: (context) =>
          Week74ProgressIndicator(title: Const.WEEK74_ProgressIndicator,key: Key('Text1')),
      Const.WEEK75_Divider: (context) =>
          Week75Divider(title: Const.WEEK75_Divider,key: Key('Text1')),
      Const.WEEK76_IgnorePointer: (context) =>
          Week76IgnorePointer(title: Const.WEEK76_IgnorePointer,key: Key('Text1')),
      Const.WEEK77_CupertinoActivityIndicator: (context) =>
          Week77CupertinoActivityIndicator(
              title: Const.WEEK77_CupertinoActivityIndicator,key: Key('Text1')),
      Const.WEEK78_ClipOval: (context) =>
          Week78ClipOval(title: Const.WEEK78_ClipOval,key: Key('Text1')),
      Const.WEEK79_AnimatedWidget: (context) =>
          Week79AnimatedWidget(title: Const.WEEK79_AnimatedWidget,key: Key('Text1')),
      Const.WEEK80_Padding: (context) =>
          Week80Padding(title: Const.WEEK80_Padding,key: Key('Text1')),
      Const.WEEK81_CheckboxListTile: (context) =>
          Week81CheckboxListTile(title: Const.WEEK81_CheckboxListTile,key: Key('Text1')),
      Const.WEEK82_AboutDialog: (context) =>
          Week82AboutDialog(title: Const.WEEK82_AboutDialog,key: Key('Text1')),
      Const.WEEK83_InterActiveViewer: (context) =>
          Week83InterActiveViewer(title: Const.WEEK83_InterActiveViewer,key: Key('Text1')),
    };
  }
}

class MyHomePage extends StatefulWidget {
  MyHomePage({required Key key, required this.title}) : super(key: key);

  final String title;

  @override
  _MyHomePageState createState() => _MyHomePageState();
}

class _MyHomePageState extends State<MyHomePage> {
  final TextEditingController _searchController = TextEditingController();
  List<String> _routes = Const.ROUTES;

  @override
  void dispose() {
    _searchController.dispose();
    super.dispose();
  }

  Widget buildTextField() {
    return TextField(
      controller: _searchController,
      textAlign: TextAlign.center,
      onSubmitted: (searchText) {
        searchWidget(searchText);
        setState(() {});
      },
    );
  }

  void searchWidget(String searchText) {
    if (searchText.isNotEmpty) {
      _routes = Const.ROUTES
          .where((element) =>
          element.toLowerCase().contains(searchText.toLowerCase()))
          .toList();
    } else {
      _routes = Const.ROUTES;
    }
  }

  Widget buildClearButton() {
    return Wrap(
      alignment: WrapAlignment.end,
      spacing: 45.0,
      children: [
        TextButton(
          onPressed: () {
            _searchController.clear();
            _routes = Const.ROUTES;
            setState(() {});
          },
          child: Text('Clear'),
        ),
        TextButton(
          onPressed: () {
            searchWidget(_searchController.text);
            setState(() {});
          },
          child: Text('Search'),
        ),
      ],
    );
  }

  Widget buildShareTwitter(int index) {
    return TextButton(
      onPressed: () async {
        /*SocialShare.shareTwitter(_routes[index],
            hashtags: [
              "ABC",
              "ABCF",
              "FWoW",
              "100DaysOfCode",
              "Flutter",
              "dart"
            ],
            url:
            "https://github.com/CharlesCCC/flutter-widget-of-the-week/tree/master/FWoW",
            trailingText: "\n Accomplished")
            .then((data) {
          print(data);
        });*/
      },
      child: Text("Twitter"),
    );
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(widget.title),
      ),
      body: SafeArea(
        child: SingleChildScrollView(
          child: Column(
            children: [
              buildTextField(),
              buildClearButton(),
              SizedBox(height: 15.0),
              Container(
                height: /*ScreenUtil.getScaleH(context, 500)*/500,
                child: ListView.builder(
                  itemCount: _routes.length,
                  itemBuilder: (context, index) {
                    return ListTile(
                      leading: Icon(Icons.developer_board),
                      title: Text(_routes[index]),
                      trailing: Container(
                        width: 150.0,
                        child: Row(
                          children: [
                            Checkbox(
                              value: /*SpUtil.getBool(_routes[index])*/true,
                              onChanged: (value) {
                                setState(() {
                                  false;
                                });
                              },
                            ),
                            buildShareTwitter(index),
                          ],
                        ),
                      ),
                      onTap: () =>
                          Navigator.of(context).pushNamed('${_routes[index]}'),
                    );
                  },
                ),
              ),
            ],
          ),
        ),
      ),
    );
  }
}